<div class="container">
    <div *ngIf="authorized; else unauthorized">
        <h2>Editing
            <span *ngIf="!editName; else editingName">
                {{recipe.name}}
                <button class="btn btn-warning btn-sm" (click)="toggleEditName()">Change Name</button>
            </span>
            <ng-template #editingName>
                <input #nameInput [value]="recipe.name">
                <button class="btn btn-primary btn-sm" (click)="saveRecipeName(nameInput.value)">Save Name</button>
                <button class="btn btn-danger btn-sm" (click)="toggleEditName()">Cancel</button>
            </ng-template>
        </h2>
        <span>
            <button *ngIf="!recipe.published; else published" class="btn btn-info"
                (click)="togglePublished()">Publish</button>
            <ng-template #published>
                <button class="btn btn-secondary" (click)="togglePublished()">Unpublish</button>
            </ng-template>
        </span>

        <div class="my-3 image-container">
            <img [src]="recipe.imageUrl">
            <button class="btn btn-warning image-edit-btn" (click)="toggelEditingImage()">Change Image</button>
        </div>

        <h3>Description</h3>
        
        {{recipe.description}}

        <div class="row">
            <div class="col-md-6 col-sm-12">
                <h3>Instructions</h3>
                <app-instructions [recipe]="recipe" [canEdit]="true"></app-instructions>
            </div>

            <div class="col-md-6 col-sm-12">
                <h3>Ingredients</h3>
                <app-ingredients [recipe]="recipe" [canEdit]="true"></app-ingredients>
            </div>
        </div>


        <div class="alert alert-danger my-5">
            <button class="btn btn-danger" (click)="deleteRecipe()">Delete</button>
            No way to undelete a recipe
        </div>


    </div>

    <ng-template #unauthorized>
        <h3>Unauthorized to Edit this recipe</h3>
    </ng-template>
</div>